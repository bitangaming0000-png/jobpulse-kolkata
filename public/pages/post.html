<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="docTitle">Post — JobPulse Kolkata</title>

  <link rel="canonical" href="">
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.querySelector('link[rel=canonical]').href = window.location.href;
      document.title = new URL(location.href).searchParams.get("title") || "JobPulse Kolkata";
      document.getElementById("docTitle").textContent = document.title;
    });
  </script>

  <script src="/assets/js/theme-boot.js?v=24"></script>
  <link rel="stylesheet" href="/assets/css/style.css?v=24">

  <script>try{localStorage.setItem('jp-consent','granted');}catch(e){}</script>
</head>
<body>
  <div class="container">
    <a href="/">← Back</a>

    <article class="card">
      <h1 id="title">Loading…</h1>
      <p class="muted"><a id="source" href="#" target="_blank" rel="noopener">View Original Source ↗</a></p>

      <!-- Hero -->
      <div class="thumb-wrap">
        <img id="hero" class="thumb" alt="Job update image"
             src="https://via.placeholder.com/900x500.png?text=JobPulse+Kolkata" />
      </div>

      <!-- Gallery -->
      <div id="gallery" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px;margin:10px 0"></div>

      <!-- Article -->
      <div id="article" style="line-height:1.6"></div>

      <!-- Last updated -->
      <p id="lastUpdated" style="margin-top:16px;font-size:13px;color:var(--muted)">
        Last updated: <span></span>
      </p>

      <!-- Share bar -->
      <div class="share-bar">
        <a id="share-wa" class="share-wa" target="_blank">WhatsApp</a>
        <a id="share-tg" class="share-tg" target="_blank">Telegram</a>
        <a id="share-copy" class="share-copy">Copy Link</a>
      </div>
    </article>
  </div>

  <!-- ✅ Footer -->
  <footer class="site-footer" style="padding:20px;text-align:center;color:var(--muted);font-size:14px;border-top:1px solid var(--border)">
    <p>© <span id="year"></span> JobPulse Kolkata — All Rights Reserved</p>
    <p style="margin-top:6px;">
      <a href="/pages/about.html">About</a> • 
      <a href="/pages/privacy.html">Privacy Policy</a> • 
      <a href="/pages/terms.html">Terms & Conditions</a> • 
      <a href="/pages/disclaimer.html">Disclaimer</a> • 
      <a href="/pages/contact.html">Contact</a>
    </p>
  </footer>
  <script>document.getElementById('year').textContent=new Date().getFullYear();</script>

  <!-- Sticky ad -->
  <div id="anchor-ad" class="anchor-ad" hidden>
    <button class="anchor-close" aria-label="Close ad">×</button>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-5732778753912461"
         data-ad-slot="2400432399"
         data-ad-format="auto"></ins>
  </div>

  <script type="module">
    const param = (k) => (new URL(location.href)).searchParams.get(k) || '';
    const title = decodeURIComponent(param('title'));
    const link  = decodeURIComponent(param('link'));
    const desc  = decodeURIComponent(param('desc'));
    const date  = decodeURIComponent(param('date'));

    document.title = title || 'JobPulse Kolkata';
    document.getElementById('docTitle').textContent = document.title;
    document.getElementById('title').textContent = title || 'Post';

    const source = document.getElementById('source');
    if (link) source.href = link;

    // Hero
    const hero = document.getElementById('hero');
    const q = encodeURIComponent('kolkata jobs ' + (title||''));
    hero.src = 'https://source.unsplash.com/900x500/?'+q;
    hero.onerror = () => { hero.src = "https://via.placeholder.com/900x500.png?text=JobPulse+Kolkata"; };

    // Gallery
    const gallery = document.getElementById('gallery');
    const keywords = ['office','interview','resume','exam','government building','kolkata city'];
    keywords.forEach(kw=>{
      const img = document.createElement('img');
      img.loading='lazy'; img.alt=kw;
      img.style.width='100%'; img.style.height='120px'; img.style.objectFit='cover'; img.style.borderRadius='10px';
      img.src = 'https://source.unsplash.com/600x400/?'+encodeURIComponent(kw);
      img.onerror = () => { img.src = "https://via.placeholder.com/600x400.png?text=Job+Image"; };
      gallery.appendChild(img);
    });

    // Article
    async function loadArticle(url){
      const box = document.getElementById('article');
      try{
        if(!url) throw new Error('Missing URL');
        const r = await fetch('/api/article?url='+encodeURIComponent(url));
        if(!r.ok) throw new Error('HTTP '+r.status);
        const j = await r.json();
        box.innerHTML = j?.contentHtml || `<p>${desc||'Details at the source.'}</p>`;
      }catch{ box.innerHTML = `<p>${desc||'Open the source for details.'}</p>`; }
    }
    loadArticle(link);

    // Last updated
    const lastUpdatedEl = document.querySelector('#lastUpdated span');
    lastUpdatedEl.textContent = (date ? new Date(date).toLocaleString('en-IN') : new Date().toLocaleString('en-IN')) + ' IST';

    // Share bar
    const shareUrl=location.href;
    const wa=document.getElementById('share-wa');
    const tg=document.getElementById('share-tg');
    const cp=document.getElementById('share-copy');
    if(wa) wa.href='https://wa.me/?text='+encodeURIComponent(title+' - '+shareUrl);
    if(tg) tg.href='https://t.me/share/url?url='+encodeURIComponent(shareUrl)+'&text='+encodeURIComponent(title);
    if(cp) cp.addEventListener('click',()=>{ navigator.clipboard.writeText(shareUrl); alert('Link copied!'); });
  </script>

  <script type="module" src="/assets/js/ads.js?v=24"></script>
</body>
</html>
