// final main.js content (already provided earlier)